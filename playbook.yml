- name: Proxmox repository, package, and user tasks
  hosts: enterprise
  remote_user: root
  roles:
    - proxmox_root

- name: Proxmox container, vm configuration
  hosts: enterprise
  roles:
    - proxmox_templates
    - proxmox_andromeda_pihole_container

  #### TODO: uncomment after primary development
  # vars_prompt:
  #   - name: logged_into_onepassword
  #     prompt: |

  #       ---------------

  #       Have you run <op signin> in the terminal? (y/N)
  #             (Anything other than "y" will cancel the run)

  #       ---------------
  #     private: false
  #     default: "n"

  # tasks:
  # ### TODO: uncomment after primary development
  #   - name: End the playbook if not logged into 1Password
  #     ansible.builtin.meta: end_play
  #     when:
  #       - logged_into_onepassword != "y"
  # - name: Import Proxmox Root Role
  #   ansible.builtin.import_role:
  #     name: proxmox_root
  # - name: Import Proxmox Admin Role
  #   ansible.builtin.import_role:
  #     name: proxmox_admin
